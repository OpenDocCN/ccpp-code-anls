# `nmap\libdnet-stripped\src\memcmp.c`

```
/*
 * 版权声明，版权归加利福尼亚大学理事会所有
 * 本代码基于 Chris Torek 贡献的软件修改而来
 * 允许在源代码和二进制形式下进行再发布和使用，无论是否进行修改
 * 1. 源代码的再发布必须保留上述版权声明、条件列表和以下免责声明
 * 2. 二进制形式的再发布必须在文档和/或其他提供的材料中重现上述版权声明、条件列表和以下免责声明
 * 3. 所有宣传材料提及此软件的特性或使用必须显示以下声明：
 *    本产品包含加利福尼亚大学伯克利分校及其贡献者开发的软件
 * 4. 未经特定书面许可，不得使用大学的名称或其贡献者的名称来认可或推广从本软件派生的产品
 *
 * 本软件由理事会和贡献者“按原样”提供，不提供任何明示或暗示的担保，包括但不限于对适销性和特定用途的暗示担保
 * 在任何情况下，无论是合同责任、严格责任还是侵权（包括疏忽或其他方式）产生的任何理论，理事会或贡献者均不对任何直接、间接、附带、特殊、惩罚性或后果性的损害承担责任
 * 包括但不限于替代商品或服务的采购、使用损失、数据或利润的损失、业务中断等
 * 即使已被告知可能发生此类损害，也不承担任何责任
 */
#if defined(LIBC_SCCS) && !defined(lint)
static char *rcsid = "$OpenBSD: memcmp.c,v 1.2 1996/08/19 08:34:05 tholo Exp $";
#endif /* LIBC_SCCS and not lint */

#include <string.h>

/*
 * Compare memory regions.
 */
int
memcmp(s1, s2, n)
    const void *s1, *s2;
    size_t n;
{
    // 如果比较的长度不为0
    if (n != 0) {
        // 定义指向 s1 和 s2 的指针，并将它们转换为无符号字符指针
        register const unsigned char *p1 = s1, *p2 = s2;

        // 使用 do-while 循环逐个比较两个内存区域的内容
        do {
            // 如果当前指针指向的内容不相等，则返回它们的差值
            if (*p1++ != *p2++)
                return (*--p1 - *--p2);
        } while (--n != 0);  // 继续比较直到长度为0
    }
    return (0);  // 如果长度为0或者所有内容都相等，则返回0
}
```